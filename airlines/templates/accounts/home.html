{% extends 'base.html' %}

{% block title %}Home - Virtual Airline{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section text-center py-5">
    <div class="container">
        <h1 class="display-4 fw-bold mb-3">
            Welcome to Virtual <span class="text-gold">Airline</span>
        </h1>
        <p class="lead mb-4">Your trusted airline to fly across Argentina</p>
        <a class="btn btn-light btn-lg fw-semibold animate-button" href="{% url 'flights:list' %}">
            <i class="fas fa-search"></i> Search Flights
        </a>
    </div>
</section>

<!-- Statistics -->
<div class="container-fluid stats-section text-center py-5">
    <div class="row">
        <div class="col-md-4 mb-3">
            <div class="card card-hover py-5 shadow-sm">
                <i class="fas fa-plane-departure fa-3x text-primary mb-3"></i>
                <h3 class="card-title">{{ total_flights }}</h3>
                <p class="card-text">Available Flights</p>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card card-hover py-5 shadow-sm">
                <i class="fas fa-users fa-3x text-success mb-3"></i>
                <h3 class="card-title">{{ total_passengers }}</h3>
                <p class="card-text">Registered Passengers</p>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card card-hover py-5 shadow-sm">
                <i class="fas fa-ticket-alt fa-3x text-warning mb-3"></i>
                <h3 class="card-title">{{ total_bookings }}</h3>
                <p class="card-text">Active Bookings</p>
            </div>
        </div>
    </div>
</div>

<!-- Upcoming Flights -->
{% if upcoming_flights %}
<div class="container-fluid upcoming-section py-5">
    <h2 class="mb-4 fw-bold text-center">
        <i class="fas fa-clock"></i> Upcoming Flights
    </h2>
    <div class="row g-4">
        {% for flight in upcoming_flights %}
        <div class="col-md-6 col-lg-4">
            <div class="card card-hover shadow-sm h-100 rounded-4">
                <div class="card-header bg-light rounded-top-4">
                    <h5 class="mb-0 fw-semibold">
                        <i class="fas fa-plane"></i> {{ flight.flight_number }}
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>
                            <i class="fas fa-map-marker-alt text-success"></i> {{ flight.origin }}
                        </strong>
                        <i class="fas fa-arrow-right mx-2"></i>
                        <strong>
                            <i class="fas fa-map-marker-alt text-danger"></i> {{ flight.destination }}
                        </strong>
                    </p>
                    <p class="card-text"><i class="fas fa-calendar"></i> {{ flight.departure_date|date:"d/m/Y" }}</p>
                    <p class="card-text"><i class="fas fa-clock"></i> {{ flight.departure_date|time:"H:i" }}</p>
                    <p class="card-text"><span class="badge bg-primary">{{ flight.get_status_display }}</span></p>
                    <p class="card-text"><strong class="text-success">${{ flight.base_price|floatformat:0 }}</strong></p>
                </div>
                <div class="card-footer d-flex justify-content-between bg-white border-0">
                    <a href="{% url 'flights:detail' flight.id %}" class="btn btn-outline-primary btn-sm fw-semibold">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'bookings:new' flight.id %}" class="btn btn-primary btn-sm fw-semibold">
                        <i class="fas fa-ticket-alt"></i> Book
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="text-center mt-4">
        <a href="{% url 'flights:list' %}" class="btn btn-outline-primary fw-semibold">
            <i class="fas fa-list"></i> View All Flights
        </a>
    </div>
</div>
{% endif %}

<!-- Services Section -->
<div class="container-fluid services-section mb-5 py-5">
    <h2 class="text-center mb-4 fw-bold">
        <i class="fas fa-star"></i> Our Services
    </h2>
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card h-100 text-center card-hover py-5 shadow-sm rounded-4">
                <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                <h5 class="card-title fw-bold">Safe Flights</h5>
                <p class="card-text">Modern fleet with the highest safety standards</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100 text-center card-hover py-5 shadow-sm rounded-4">
                <i class="fas fa-clock fa-3x text-success mb-3"></i>
                <h5 class="card-title fw-bold">Punctuality</h5>
                <p class="card-text">Committed to schedules so you arrive on time</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100 text-center card-hover py-5 shadow-sm rounded-4">
                <i class="fas fa-headset fa-3x text-warning mb-3"></i>
                <h5 class="card-title fw-bold">24/7 Support</h5>
                <p class="card-text">Customer support available around the clock</p>
            </div>
        </div>
    </div>
</div>

<!-- Call to Action / Login & Register -->
{% if not user.is_authenticated %}
<div class="container-fluid mb-5 px-3">
    <div class="login-card-glass text-center p-5 position-relative overflow-hidden mx-auto">
        <h3 class="fw-bold mb-3">Ready to Fly?</h3>
        <p class="lead mb-4">Sign up and start booking your flights with ease</p>

        <div class="d-flex justify-content-center gap-3 flex-wrap mb-4">
            <a href="{% url 'accounts:register' %}" class="btn btn-register btn-lg fw-semibold">
                <i class="fas fa-user-plus"></i> Register
            </a>
            <a href="{% url 'accounts:login' %}" class="btn btn-login btn-lg fw-semibold">
                <i class="fas fa-sign-in-alt"></i> Log In
            </a>
        </div>

        <div class="extra-info text-muted">
            <p><i class="fas fa-plane-departure"></i> Explore dozens of flights daily</p>
            <p><i class="fas fa-headset"></i> 24/7 Customer Support</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
/* Hero Section */
.hero-section {
    padding: 80px 0;
}

/* Text dorado para "Airline" */
.text-gold {
    color: #ffd200;
    font-weight: 900;
}

/* Animación botón */
.animate-button {
    transition: transform 0.3s ease, background-color 0.3s ease;
}
.animate-button:hover {
    transform: translateY(-3px);
    background-color: #e0e0e0;
}

/* Cards con detalle sutil de fondo */
.card-hover {
    border-radius: 15px;
    transition: all 0.3s ease;
    background: #ffffff;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
}
.card-hover:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1), 0 3px 6px rgba(0,0,0,0.08);
}

/* Secciones */
.stats-section,
.upcoming-section,
.services-section {
    padding: 60px 20px;
}

/* Glassmorphism Login & Register */
.login-card-glass {
    max-width: 100%;
    border-radius: 30px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    border: 1px solid rgba(255,255,255,0.25);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
}

/* Botones login/register glass */
.btn-register {
    background-color: #28a745;
    color: #fff;
    border-radius: 50px;
    padding: 0.75rem 1.8rem;
    transition: all 0.3s ease;
}
.btn-register:hover {
    background-color: #218838;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgb(255, 255, 255);
}

.btn-login {
    background-color: transparent;
    color: #0071c2;
    border: 2px solid #0071c2;
    border-radius: 50px;
    padding: 0.75rem 1.8rem;
    transition: all 0.3s ease;
}
.btn-login:hover {
    background-color: #0071c2;
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
</style>
{% endblock %}
